# 7

![image-20200413193716386](C:\Users\Aober\AppData\Roaming\Typora\typora-user-images\image-20200413193716386.png)

|                                | 学生         | 教师                              | 学院教务                      | 校区教务                    | 学校总教务                    |
| ------------------------------ | ------------ | --------------------------------- | ----------------------------- | --------------------------- | ----------------------------- |
| 帐号                           | 个人         | 个人                              | 个人+学院教师/学生            | 个人+学院教务+校区教师/学生 | 所有                          |
| 密码                           | 个人         | 个人                              | 个人                          | 个人                        | 个人                          |
| 成绩                           | 个人所有成绩 | 无                                | 学院学生成绩                  | 校区各学院学生成绩          | 所有成绩                      |
| 入学/入职时间+学工号+姓名+所属 | 个人         | 个人                              | 学院所属                      | 校区所属                    | 全体教职员工                  |
| 权限                           | 查看个人信息 | 查看个人信息+提交所授科目成绩请求 | 查看个人信息+管理学院科目成绩 | 查看个人信息+管理学院教务   | 查看个人信息+管理全体教职员工 |

|      | 校内接入     | 校外接入                      |
| ---- | ------------ | ----------------------------- |
| IP   | 直接准许访问 | 部分网页需要验证 / 不允许访问 |



|                                  | 浏览器 | 服务端 |
| -------------------------------- | ------ | ------ |
| localstorage，sessionstorage     | Y      | F      |
| cookie，log                      | Y      | Y      |
| listenport，map，max-connections | F      | Y      |
| hot backup location              | F      | Y      |



| （查看）         | 学生     | 教师           | 学院教务   | 校区教务   | 学校总教务   |
| ---------------- | -------- | -------------- | ---------- | ---------- | ------------ |
| 成绩             | 仅个人   | 仅授课班级学生 | 全学院学生 | 全校区学生 | 全校学生     |
| 其余基本信息     | 仅个人   | 仅个人         | 全学院人员 | 全校区人员 | 全校人员     |
| 密码             | 禁止查看 | 禁止查看       | 禁止查看   | 禁止查看   | 全校人员     |
| 密码存储加密方法 | 禁止查看 | 禁止查看       | 禁止查看   | 禁止查看   | 掌握         |
| 账号             | 仅个人   | 仅授课班级学生 | 全学院人员 | 全校区人员 | 全校人员     |
| 网站公告         | 全部     | 全部           | 全部       | 全部       | 全部         |
| 管理用户数据     | 禁止查看 | 禁止查看       | 学院内部   | 校区内部   | 全校所有数据 |

| （修改）           | 学生     | 教师                       | 学院教务               | 校区教务                     | 学校总教务           |
| ------------------ | -------- | -------------------------- | ---------------------- | ---------------------------- | -------------------- |
| 成绩               | 禁止修改 | 禁止修改，只可提出修改请求 | 修改学院所授课程的成绩 | 修改非学院所授的通识课程成绩 | 修改全校所有课程成绩 |
| 密码               | 修改个人 | 修改个人                   | 修改个人               | 修改个人                     | 修改个人             |
| 账号               | 禁止修改 | 禁止修改                   | 禁止修改               | 禁止修改                     | 禁止修改             |
| 网站公告等公共数据 | 禁止修改 | 禁止修改                   | 禁止修改               | 禁止修改                     | 统一发布             |
| 管理用户数据       | 禁止修改 | 禁止修改                   | 禁止修改               | 禁止修改                     | 禁止修改             |
| 其余基本信息       | 禁止修改 | 禁止修改                   | 禁止修改               | 禁止修改                     | 禁止修改             |
|                    |          |                            |                        |                              |                      |



| （查看）                  | 开发者/测试员/产品经理 | 系统管理操作员 | 运维     | 备份管理员 | 总管理员 |
| ------------------------- | ---------------------- | -------------- | -------- | ---------- | -------- |
| 开发文档 / 安全性评估报告 | 允许查看               | 允许查看       | 允许查看 | 允许查看   | 允许查看 |
| 环境配置参数              | /                      | /              | 允许查看 | /          | 允许查看 |
| 系统运行日志              | /                      | /              | 允许查看 | 允许查看   | 允许查看 |
| 数据库备份                | /                      | /              | /        | /          | /        |
| 数据库物理地址            | /                      | /              | 了解     | /          | 了解     |
| 操作员记录                | /                      | /              | 允许查看 | /          | 允许查看 |

| （修改）                  | 开发者/测试员/产品经理 | 系统管理操作员 | 运维     | 备份管理员 | 总管理员 |
| ------------------------- | ---------------------- | -------------- | -------- | ---------- | -------- |
| 开发文档 / 安全性评估报告 | 允许修改               |                | /        | 允许查看   | /        |
| 环境配置参数              | /                      | /              | 允许修改 | /          | /        |
| 系统运行日志              | /                      | /              | /        | /          | /        |
| 数据库备份                | /                      | /              | /        | /          | /        |
| 数据库物理地址            | /                      | /              | /        | /          | 可更改   |
| 操作员记录                | /                      | /              | 允许查看 | /          | /        |





讨论禁止修改禁止修改有数据库的信息系统。

要分类。只有分类，才能做到适量的安全。越需要保密的信息数量，越少越好。

ex. 以tjdx学生成绩管理系统为例。做分类，从公开级、到保密级。



第一是数据分类：（学生信息，环境相关数据（服务器配置），日志文件，审计，客户端数据）

（数据不一定存在数据库中。web服务器也可以）

大家都可以看到一些公告？但是发布和修改公告需要管理权限。

成绩是首要的数据。

自己可以得知自己的所有成绩。查看。

（对于其他学生是非授权状态）

授课老师仅知道所授课程的学生成绩。修改，查看。

（对于其他科目是非授权状态）

教务可以知道成绩。查看。

（对于成绩，根据校区、学院、操作方式进行授权管理）

各角色的账户密码是需要保密的数据。

每个角色的密码只能由帐号管理者自己掌握。

（教务可以用操作的接口，但是仍然不能知道密码）

不同角色的登录接口不同。



使用单纯的基于角色的访问控制系统。

或许是不是要每个校区放一个服务器？





角色上（教学层次，系统运维（数据操作管理层次））

教学上的普通用户：

第一是学生，自查询，自己的所有成绩可以被自己知道。

教学上的分级管理：

第二是授课老师有 提交修改授课成绩请求 的权限。只能看到自己学生的本门成绩。

第三层是学院教务只能知道本学院的学生成绩，负责管理本学院学生的成绩的修改。

第四层校区教务只能知道校区学生成绩，并对学院教务进行管理，负责通识科目学生成绩的修改。

更高一层的，学校总教务可以具备一切权限？

直管办、教育部监督。



系统相关：

第一是开发、测试的程序员。

第二是系统管理。

第三是运维--备份管理员。











从不同的角度来看，金字塔是不一样的。

对于教务处，所有数据都是透明的。

分角色要考虑生命周期，运行这个系统，不同的人物角色有哪些，他们自己有什么安全关切。

在不同的业务操作流程中，系统对人关心的，落实到安全控制上面去，这跟人所处的操作阶段不一样。（vpn、校内、校外）

要看对应的数据存在什么地方，服务环境，热备份，前台后台分离？控制措施？





![1](./img/7-1.png)

数据类型不局限于成绩，人物利用角色分类。

有若干表格，然后建立表格之间的关系。

金字塔涉及角色的操作和权限。

最重要的是root管理的权限认证信息。有业务部署的root（只能对平台，不能对数据），有管理的root。



为什么要以登陆方式区分：

服务器识别ip从哪里登录，校园网，校外。

不同的登陆方式意味着安全管理方式不同。



学生成绩不在classified里面。

学生成绩放在最底下。

所有可能的数据类型：跟人相关的数据、跟机器、环境相关的、跟管理相关、业务控制相关。

做平衡的时候，考虑兼顾安全和业务可用。用户认证信息放在（第三方 / 数据库）数据存储、服务环境。